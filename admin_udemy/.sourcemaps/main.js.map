{"version":3,"sources":["../../src/pages/subir/subir.ts","../../node_modules/@angular/core/@angular lazy","../../src lazy","../../src/providers/cargararchivos/cargararchivos.ts","../../src/pages/home/home.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts","../../src/pipes/placeholder/placeholder.ts","../../src/config/firebase.config.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams,ViewController ,ToastController ,Platform ,LoadingController} from 'ionic-angular';\nimport { Camera, CameraOptions } from '@ionic-native/camera';\nimport { ImagePicker,ImagePickerOptions } from '@ionic-native/image-picker';\nimport { CargararchivosProvider } from \"../../providers/cargararchivos/cargararchivos\";\n@IonicPage()\n@Component({\n  selector: 'page-subir',\n  templateUrl: 'subir.html',\n})\nexport class SubirPage {\n  titulo:string=\"\";\n  imgPreview:string=null;\n  img:string=\"\";\n  constructor(public navCtrl: NavController, public navParams: NavParams,public viewCtrl:ViewController,\n    private camera:Camera,private platform:Platform,private loadingCtrl:LoadingController,\n    public toastCtrl:ToastController,private imagePicker: ImagePicker, private _cas: CargararchivosProvider ) {\n  }\n  crear_post(){\n    console.log(\"Subiendo imagen...\");\n\n    let archivo = {\n      'titulo': this.titulo,\n      'img': this.img\n    };\n\n    let loader = this.loadingCtrl.create({\n      content: \"Subiendo...\"\n    });\n    loader.present();\n\n\n\n    this._cas.cargar_imagenes_firebase( archivo )\n          .then(\n            ()=>{\n              loader.dismiss();\n              this.cerrar();\n            },\n\n            ( error )=>{\n              loader.dismiss();\n              this.mostra_toast(\"Error al cargar: \" + error );\n              console.log(\"Error al cargar \" + JSON.stringify(error) );\n            }\n\n           )\n\n\n  }\n\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad SubirPage');\n  }\n  cerrar(){this.viewCtrl.dismiss();}\n  mostrar_camera(){\n    if(!this.platform.is(\"cordova\")){\n     this.mostra_toast(\"error este no es un dispositivo\");\n     return;\n    }\n  \n    const options: CameraOptions = {\n    quality: 100,\n    destinationType: this.camera.DestinationType.DATA_URL,\n    encodingType: this.camera.EncodingType.JPEG,\n    mediaType: this.camera.MediaType.PICTURE,\n    correctOrientation:true\n                                  }\n  \n      this.camera.getPicture(options).then((imageData) => {\n      // imageData is either a base64 encoded string or a file URI\n      // If it's base64:\n      this.imgPreview = 'data:image/jpeg;base64,' + imageData;\n      this.img=imageData;\n      \n      }, (err) => {\n      // Handle error\n      this.mostra_toast(\"error\" + err);\n      console.error(\"erroe en la camara\" ,err);\n      });\n  \n   }\n   seleccionar_fotos(){\n    if(!this.platform.is(\"cordova\")){\n      this.mostra_toast(\"error este no es un dispositivo\");\n      return;\n     }\n    let opciones:ImagePickerOptions={\n      maximumImagesCount:1,\n      quality:40,outputType:1\n    }\n   \n   \n      this.imagePicker.getPictures(opciones).then((results) => {\n            \n     for(let img of results){\n       this.imgPreview='data:image/jpeg;base64,'+img\n       this.img=img;\n       break;\n     }\n   \n       }, (err) => { this.mostra_toast(\"error plugin selecion\" + err);\n      console.error(\"er\\:\" + JSON.stringify( err));\n      });\n      \n   }\n   private mostra_toast(texto:string){\n    this.toastCtrl.create({\n      message:texto,\n      duration :2500\n    }).present();\n  }\n \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/subir/subir.ts","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 160;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/@angular lazy\n// module id = 160\n// module chunks = 1","var map = {\n\t\"../pages/subir/subir.module\": [\n\t\t452,\n\t\t0\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids)\n\t\treturn Promise.reject(new Error(\"Cannot find module '\" + req + \"'.\"));\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(ids[0]);\n\t});\n};\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 201;\nmodule.exports = webpackAsyncContext;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 201\n// module chunks = 1","import { AngularFireDatabase } from 'angularfire2/database';\nimport { firebaseConfig } from './../../config/firebase.config';\n\nimport { Injectable } from '@angular/core';\nimport { ToastController } from \"ionic-angular\";\nimport { AngularFireModule  } from 'angularfire2';\nimport { AngularFireDatabaseModule, FirebaseListObservable  } from 'angularfire2/database';\nimport * as firebase from \"firebase\";\nimport 'rxjs/add/operator/mergeMap';\nimport 'rxjs/add/operator/map';\n\n@Injectable()\nexport class CargararchivosProvider {\n  private CARPETA_IMAGENES:string = \"img\";\n  private POSTS:string = \"post\";\n\n  imagenes:any[] = [];\n  lastKey:string = undefined;\n\n  constructor( public af: AngularFireDatabase,\n               private toastCtrl: ToastController) {\n   \n  }\n    cargar_imagenes(){\n\n    return new Promise(  (resolve, reject)=>{\n\n      this.af.list(\"/post\", {//nombre de la base de datos en firebase\n\n        query: {\n          limitToLast: 4,\n          orderByKey: true,\n          endAt: this.lastKey\n        }\n\n      })\n      .subscribe( posts =>{\n\n        if( this.lastKey ){\n          posts.pop(); // Pruebenlo!\n        }\n\n        if( posts.length == 0 ){\n          console.log(\"Ya no existe registros\");\n          resolve(false);\n          return;\n        }\n\n        this.lastKey = posts[0].$key;\n\n        for( let i = posts.length-1; i>=0; i-- ){\n\n          let post = posts[i];\n          this.imagenes.push( post );\n\n        }\n\n        resolve(true);\n\n\n      })\n\n\n    })\n\n  }\n\n\n\n  cargar_imagenes_firebase( archivo:archivoSubir ){\n\n\n    let promesa = new Promise( (resolve, reject)=>{\n\n      this.mostar_toast(\"Inicio de carga\");\n\n      let storageRef = firebase.storage().ref();\n      let nombreArchivo = new Date().valueOf(); //1237128371\n\n      let uploadTask:firebase.storage.UploadTask =\n              storageRef.child(`${ this.CARPETA_IMAGENES  }/${ nombreArchivo }`)\n              .putString( archivo.img, 'base64', { contentType: 'image/jpeg' }  );\n\n\n      uploadTask.on(  firebase.storage.TaskEvent.STATE_CHANGED,\n          ( snapshot )=>{}, // saber el avance del archivo\n          ( error )=> {  // Manejo de errores\n\n            console.log(\"Error al subir \", JSON.stringify( error ));\n            this.mostar_toast(\"Error al cargar: \" + JSON.stringify( error ) );\n            reject(error);\n\n          },\n          ()=>{ // Termino el proceso\n\n            let url = uploadTask.snapshot.downloadURL;\n            this.mostar_toast(\"Imagen cargada exitosamente!!\");\n            this.crear_post( archivo.titulo, url );\n            resolve();\n\n          }\n        )\n\n    });\n\n  \n\n    return promesa;\n\n  }\n\n  private crear_post( titulo:string, url:string ){\n\n    let post:archivoSubir = {\n      img: url,\n      titulo: titulo\n    };\n\n    let $key = this.af.list(`/${ this.POSTS}`).push( post ).key;\n    \n     post.$key = $key;\n\n    this.imagenes.push( post );\n\n  }\n\n   private mostar_toast( texto:string ){\n    this.toastCtrl.create({\n      message:texto,\n      duration: 2500\n    }).present();\n  }\n\n\n}\ninterface archivoSubir{\n  $key?:string;\n  img:string;\n  titulo:string;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/cargararchivos/cargararchivos.ts","import { Component } from '@angular/core';\nimport { NavController ,ModalController } from 'ionic-angular';\nimport { SubirPage } from './../subir/subir';\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html'\n})\nexport class HomePage {\n\n  constructor(public navCtrl: NavController ,public modalCtrl:ModalController) {\n\n  }\n  mostrar_modal(){let modal = this.modalCtrl.create(SubirPage);modal.present();}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { ErrorHandler, NgModule } from '@angular/core';\nimport { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport { StatusBar } from '@ionic-native/status-bar';\n\nimport { MyApp } from './app.component';\nimport { HomePage } from '../pages/home/home';\nimport {SubirPage} from '../pages/subir/subir';\nimport { CargararchivosProvider } from '../providers/cargararchivos/cargararchivos';\nimport { PlaceholderPipe } from '../pipes/placeholder/placeholder';\n//plugin\nimport { Camera } from '@ionic-native/camera';\nimport { ImagePicker } from '@ionic-native/image-picker';\n//firebase\nimport { AngularFireModule } from 'angularfire2';\nimport { AngularFireDatabaseModule } from 'angularfire2/database';\nimport { AngularFireAuthModule } from 'angularfire2/auth';\nimport{firebaseConfig}from '../config/firebase.config';\n@NgModule({\n  declarations: [\n    MyApp,\n    HomePage,SubirPage,PlaceholderPipe\n  ],\n  imports: [\n    BrowserModule,\n    IonicModule.forRoot(MyApp, {}, \n{\n  links: [\n    { loadChildren: '../pages/subir/subir.module#SubirPageModule', name: 'SubirPage', segment: 'subir', priority: 'low', defaultHistory: [] }\n  ]\n}),\n    AngularFireModule.initializeApp(firebaseConfig),\n   AngularFireDatabaseModule,\n   AngularFireAuthModule\n  ],\n  bootstrap: [IonicApp],\n  entryComponents: [\n    MyApp,\n    HomePage,SubirPage\n  ],\n  providers: [\n    StatusBar,\n    SplashScreen,\n    Camera,ImagePicker,CargararchivosProvider,\n    {provide: ErrorHandler, useClass: IonicErrorHandler},\n    \n  ]\n})\nexport class AppModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component } from '@angular/core';\nimport { Platform } from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\n\nimport { HomePage } from '../pages/home/home';\n@Component({\n  templateUrl: 'app.html'\n})\nexport class MyApp {\n  rootPage:any = HomePage;\n\n  constructor(platform: Platform, statusBar: StatusBar, splashScreen: SplashScreen) {\n    platform.ready().then(() => {\n      // Okay, so the platform is ready and our plugins are available.\n      // Here you can do any higher level native things you might need.\n      statusBar.styleDefault();\n      splashScreen.hide();\n    });\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { Pipe, PipeTransform } from '@angular/core';\n\n/**\n * Generated class for the PlaceholderPipe pipe.\n *\n * See https://angular.io/docs/ts/latest/guide/pipes.html for more info on\n * Angular Pipes.\n */\n@Pipe({\n  name: 'placeholder',\n})\nexport class PlaceholderPipe implements PipeTransform {\n  /**\n   * Takes a value and makes it lowercase.\n   */\n  transform(value: string, defecto:string=\"Titulo\") {\n    return {value} ? value:defecto;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/placeholder/placeholder.ts","export const firebaseConfig = {\r\n  apiKey: \"AIzaSyA2fyf7ZMrY3rm6GgqVqgZzV8yl9gYmeA8\",\r\n    authDomain: \"curso-udemy-d8fbf.firebaseapp.com\",\r\n    databaseURL: \"https://curso-udemy-d8fbf.firebaseio.com\",\r\n    projectId: \"curso-udemy-d8fbf\",\r\n    storageBucket: \"curso-udemy-d8fbf.appspot.com\",\r\n    messagingSenderId: \"950257889484\"\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/config/firebase.config.ts"],"sourceRoot":""}